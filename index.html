<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jalaram Academy | Blue Gold v187</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore-compat.js"></script>

    <style>
        :root {
            --primary: #0091ea; /* CLASSPLUS BLUE */
            --bg: #f5f7fa; 
            --text: #2d3436;
            --danger: #ef4444; --success: #22c55e; --warning: #f59e0b;
        }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Plus Jakarta Sans',sans-serif; -webkit-tap-highlight-color:transparent; }
        body { background:var(--bg); color:var(--text); height:100vh; display:flex; flex-direction:column; }

        /* HEADER */
        .app-bar { background:var(--primary); color:white; padding:15px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 4px 10px rgba(0, 145, 234, 0.2); }
        .brand { font-size:18px; font-weight:800; letter-spacing:-0.5px; }

        /* SUB NAV */
        .sub-nav { background:white; white-space:nowrap; overflow-x:auto; border-bottom:1px solid #ddd; padding:0 10px; display:none; }
        .sub-tab { display:inline-block; padding:12px 15px; font-size:13px; font-weight:600; color:#54656f; border-bottom:3px solid transparent; cursor:pointer; }
        .sub-tab.active { color:var(--primary); border-color:var(--primary); }

        /* CONTENT */
        .main { flex:1; overflow-y:auto; padding:15px; padding-bottom:80px; }
        .pane { display:none; } .pane.active { display:block; }

        /* CARDS & UI */
        .card { background:white; padding:15px; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.05); margin-bottom:10px; border: 1px solid rgba(0,0,0,0.03); }
        .row { display:flex; justify-content:space-between; align-items:center; }
        .label { font-size:11px; color:#636e72; font-weight:700; margin-bottom:5px; display:block; text-transform:uppercase; }

        /* INPUTS */
        input, select { width:100%; padding:12px; border:1px solid #dfe6e9; border-radius:8px; margin-bottom:10px; font-size:14px; background:white; outline:none; }
        input:focus { border-color:var(--primary); }

        /* BUTTONS */
        .btn { padding:12px; border:none; border-radius:10px; font-weight:700; cursor:pointer; width:100%; font-size:14px; margin-top:5px; transition: 0.2s; }
        .btn-main { background:var(--primary); color:white; box-shadow: 0 4px 12px rgba(0, 145, 234, 0.3); }
        .btn-main:active { transform: scale(0.98); }
        .btn-sec { background:#e2e8f0; color:#1e293b; }
        .btn-red { background:#fee2e2; color:var(--danger); }
        .btn-sm { width:auto; padding:6px 12px; font-size:12px; }

        /* BOTTOM NAV */
        .bot-nav { position:fixed; bottom:0; width:100%; background:white; display:flex; justify-content:space-around; padding:10px; border-top:1px solid #eee; box-shadow: 0 -2px 10px rgba(0,0,0,0.03); }
        .nav-item { text-align:center; font-size:10px; color:#a4b0be; font-weight:600; width:20%; cursor:pointer; transition: 0.3s; }
        .nav-item.active { color:var(--primary); }

        /* MODALS */
        .modal-ol { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000; display:none; justify-content:center; align-items:center; backdrop-filter: blur(2px); }
        .modal { background:white; width:90%; max-width:400px; padding:20px; border-radius:16px; max-height:90vh; overflow-y:auto; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        
        #sim-exit { position: fixed; bottom: 85px; right: 20px; background: var(--danger); color: white; padding: 10px 20px; border-radius: 30px; font-weight: 700; z-index: 9999; display: none; cursor: pointer; }
    </style>
</head>
<body>

    <div id="sim-exit" onclick="exitSim()">EXIT GOD MODE âœ•</div>

    <div id="auth" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:3000; display:flex; align-items:center; justify-content:center;">
        <div class="card" style="width:320px; text-align:center; padding:30px;">
            <div style="font-size:50px;">ðŸŽ“</div>
            <h2 style="font-weight:800;">Jalaram Academy</h2>
            <p style="color:#666; margin-bottom:20px; font-size:13px;">Step to Success</p>
            
            <div id="l-form">
                <select id="l-role" class="input"><option>Admin</option><option>Teacher</option><option>Student</option></select>
                <input id="l-id" placeholder="Login ID">
                <input type="password" id="l-pass" placeholder="PIN">
                <button class="btn btn-main" onclick="login()">Login</button>
            </div>
        </div>
    </div>

    <div id="app" style="display:none;">
        <div class="app-bar">
            <div class="brand">Jalaram Zenith</div>
            <div id="u-chip" style="font-size:10px; background:rgba(255,255,255,0.2); padding:4px 10px; border-radius:20px; font-weight:700;">User</div>
        </div>
        <div class="sub-nav" id="sub-nav"></div>
        <div class="main">
            <div id="pane-admin" class="pane">
                <div id="tab-users" class="active">
                    <input placeholder="ðŸ” Search Database..." onkeyup="renderUsers(this.value)">
                    <div id="list-s"></div><div id="list-t"></div>
                </div>
            </div>
            <div id="pane-home" class="pane active"><div class="card"><h3>Welcome Back!</h3><p>Connecting to Cloud...</p></div></div>
        </div>
        <div class="bot-nav" id="bot-nav"></div>
    </div>

    <script>
        // --- 1. FIREBASE CONFIG ---
        const firebaseConfig = {
            // !!! PASTE YOUR KEYS FROM FIREBASE HERE !!!
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // --- 2. THE CORE LOGIC ---
        let user = null, realUser = null;
        let state = { students: [], teachers: [] };

        // Auto-Refresher (Pull from Cloud every 3 seconds)
        function initListeners() {
            db.collection('users').onSnapshot(snap => {
                state.students = []; state.teachers = [];
                snap.forEach(doc => {
                    let u = doc.data();
                    if(u.role === 'Student') state.students.push(u);
                    else if(u.role === 'Teacher') state.teachers.push(u);
                });
                if(user) renderUsers('');
            });
        }
        initListeners();

        function login() {
            const id = document.getElementById('l-id').value;
            const ps = document.getElementById('l-pass').value;
            if(id === 'admin' && ps === '1234') {
                user = {name:'Admin', role:'Admin'};
                document.getElementById('auth').style.display = 'none';
                document.getElementById('app').style.display = 'block';
                setupNav();
            } else {
                alert("Only 'admin' / '1234' works for now. Paste keys to unlock others!");
            }
        }

        function setupNav() {
            const nav = document.getElementById('bot-nav');
            nav.innerHTML = '<div class="nav-item active" onclick="openPane(\'pane-home\')">Home</div><div class="nav-item" onclick="openPane(\'pane-admin\')">Admin</div>';
        }

        function openPane(id) {
            document.querySelectorAll('.pane').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function renderUsers(q) {
            document.getElementById('list-s').innerHTML = state.students.map(u => `<div class="card"><b>${u.name}</b></div>`).join('');
        }
    </script>
</body>
</html>
